# JavaScript 运行时环境

JavaScript 代码执行需要 JavaScript 引擎，JavaScript 引擎的运行也需要宿主环境(浏览器渲染进行或 Node.js 进程等)。

只考虑在 Chrome 浏览器中，渲染进程与 V8 共同构建了 JavaScript 代码的运行时环境

运行时环境的基础功能部件包括，栈空间、堆空间、全局执行上下文、全局作用域、内置的内建函数、宿主环境提供的扩展函数和对象、消息循环系统等

## 栈空间

主要用与管理 JavaScript 中函数的调用，函数调用时上下文相关的内容会放到栈上，函数执行完毕，该函数的执行上下文会被销毁

栈是一种先进后出的数据结构，在内存上是一片连续的空间，故而查找效率高。V8 对栈的大小做了限制，函数调用层级过深可能会出现**栈溢出**

## 堆空间

堆是一种树形的存储结构，用来存储对象类型的离散的数据

## 全局执行上下文

执行一段可执行的 JavaScript 代码时，会生成一个执行上下文。V8 用执行上下文来维护执行当前代码所需的变量声明、this指向等

执行上下文主要包含三部分，变量环境、词法环境、this 关键字