# 表达式和操作符

表达式 = 值 ｜ 值 + 运算符 ｜ 运算符 + 表达式 ｜ 值 + 运算符 + 表达式


## 主表达式（primary expression）
### 基本数据类型字面量
```js
'string'
`string text ${expression} string text`
tagFunction`string text ${expression} string text` // 标签化模板字面量

1

1n

true

null

undefined
```
### 对象、数组初始化程序
```js
const obj = {
  obj: 'obj value'
}
const arr = ['arrItem', , 'lastItem']
```
### function（函数表达式）
```js
let function_expression = function [name]([param1[, param2[, ..., paramN]]]) {
  statements
}
```
### class（类表达式）
```js
const MyClass = class [className] [extends otherClassName] {
  // class body
}
```
### function*（生成器函数表达式）
```js
function* [name]([param1[, param2[, ..., paramN]]]) {
  statements
}
```
### async function（异步函数表达式）
```js
async function [name]([param1[, param2[, ..., paramN]]]) {
  statements
}
```
### async function*（异步生成器函数表达式）
```js
async function* [name]([param1[, param2[, ..., paramN]]]) {
  statements
}
```
### 正则表达式字面量
```js
const reg = /ab+c/i
```
### 分组运算符 `(expression)`
用于控制表达式中的运算优先级

### this
**运行时**绑定值

## 属性访问表达式
```js
expression . identifier
expression [ expression ]
// 条件式属性访问
expression ?. identifier
expression ?. [expression]
```

## 调用表达式
```js
fn()
o.fn?.() // 条件式调用
```
## 对象创建表达式（new）
```js
new Object()
new Date // 调用时，不给构造函数传参时，圆括号可以省略
```

## 操作符

|一元操作符|操作|结合性|操作数|类型|
|---|---|---|---|---|
|`~`|反转二进制位|右|1|int -> int|
|`!`|反转布尔值|右|1|bool -> bool|
|`delete`|删除属性|右|1|lval -> bool|
|typeof|确定操作数类型|右|1|any -> str|
|void|返回 undefined|右|1|any -> undef|

|操作符|操作|结合性|操作数|类型|
|---|---|---|---|---|
|`++`|先或后递增|右|1|lval -> num|
|`--`|先或后递减|右|1|lval -> num|
|`-`|负值|右|1|num -> num|
|`+`|正值|右|1|any -> num|
|`+`、`-`、`*`、`/`、`%`|加、减、乘、除、取余|左|2|num,num -> num|
|`+`|拼接字符串|左|2|str,str -> str|
|`**`|幂|右|2|num,num -> num|

|操作符|操作|结合性|操作数|类型|
|---|---|---|---|---|
|`<<`|左移位|左|2|int,int -> int|
|`>>`|右移位以符号填充|左|2|int,int -> int|
|`>>>`|右移位以零填充|左|2|int,int -> int|
|`&`|计算按位与|左|2|int,int -> int|
|`^`|计算按位异或|左|2|int,int -> int|
|`|`|计算按位或|左|2|int,int -> int|

|操作符|操作|结合性|操作数|类型|
|---|---|---|---|---|
|`<`、`<=`、`>`、`>=`|按数值顺序比较|左|2|num,num -> bool|
|`<`、`<=`、`>`、`>=`|按字母表顺序比较|左|2|str,str -> bool|

|操作符|操作|结合性|操作数|类型|
|---|---|---|---|---|
||||||
||||||
||||||

|操作符|操作|结合性|操作数|类型|
||||||
||||||
||||||
||||||

|操作符|操作|结合性|操作数|类型|
||||||
||||||
||||||

|操作符|操作|结合性|操作数|类型|
||||||

|操作符|操作|结合性|操作数|类型|
||||||

|操作符|操作|结合性|操作数|类型|
||||||

|操作符|操作|结合性|操作数|类型|
||||||
||||||
||||||
||||||
||||||
||||||
||||||
||||||
||||||


## 主要表达式
### `...`

**`...`应用**
1. rest 参数，剩余参数（函数、解构赋值）
2. spread 语法，展开可迭代对象(内部使用迭代器收集对象)

### `super`

若一个函数被定义为一个对象字面量(方法必须用 `{ methos () {} }` 方式来定义)或 class 类函数的方法，该函数会生成一个内部属性 `[[HomeObject]]` 指向该对象或 class 类，函数中的 super 关键字用于解析 `[HomeObject]` 指向的原型链上的属性。[HomeObject](https://zh.javascript.info/class-inheritance#shen-ru-nei-bu-tan-jiu-he-homeobject)

**语法**

```
super() // 仅在 class 类的 constructor 中使用
super.xx | super['xx'] // 仅在对象字面量或 class 类的方法中使用
```

**注意**
- 在 class 类的静态方法中 `[HomeObject]` 指向所在类的 prototype 对象
- 在 class 类的实例方法和对象字面量的方法中 `[HomeObject]` 指向该类或对象

```
super([arguments]) // 调用父类的构造函数，尽在类的构造函数中有效
super.propertyOnParent
super[expression]
```

### `new.target`

当函数或类构造函数通过 new 调用时，其内部可通过 `new.target` 获取当前构造函数。（判断是否通过 new 调用）

箭头函数中无 `new.target`，如使用则根据作用域查找规则访问外层作用域的 `new.target`