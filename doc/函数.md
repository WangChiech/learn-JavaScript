# 函数

## 函数字面量类型

### 函数声明

### 函数表达式

### class

### 箭头函数

执行上下文中无 this 、arguments、

## 函数参数

### 作用域

当函数参数使用了默认值或剩余参数，参数可以看成非简单模式，此时会在函数的变量环境中创建一个新的变量环境，新的内层变量环境用与存放函数体中声明的变量（参数存放于外层变量环境），函数体中的变量查找会先从新创建的内层变量环境中查找，找不到再去外层函数变量环境中查找。

**变量环境**存放 `var/function` 声明的变量，**词法环境**用于存放 `let/const` 声明的变量。

```
let a = 'global a'
function fn(a = 'fn paramer init a', y = () => {
  console.log('y1__', a)
  a = 'y a'
  console.log('y2__', a)
}) {
  console.log('fn1__', a)
  var a = 'fn init a'
  console.log('fn2__', a)
  y()
  console.log('fn3__', a)
  function innerFn() {
    a = 'innerFn a'
  }
  innerFn()
  console.log('fn4__', a)
  y()
}
fn()
console.log('global__', a)
```

### 默认值

```
function fn(a = 'a') {
  console.log(a)
}
fn() // 'a'
fn(undefined) // 'a'
fn('') // ''
fn(null) // null
```

```
function fn (a = 'a') {
  let a = 'changed a' // Uncaught SyntaxError: Identifier 'a' has already been declared
}

function fn(a = 'a') {
  var a = 'changed a' // 正常运行
}
```

### 剩余参数

## arguments

非箭头函数执行上下文中的可用局部变量，值为函数调用时传递参数组成的类数组。

执行上下文中传入实参的参数变量会与 arguments 中对应索引的值建立关联关系

```js
function fn(a, b) {
  console.log(a, b, arguments) // undefined, undefined, { 0: undefined, length: 1 }
  arguments[0] = 'changed a' // a 随之改变
  arguments[1] = 'changed b' // b 不会随之改变
  console.log(a, b, arguments) // 'changed a', undefined, { 0: 'changed a', length: 1 }
}
fn(undefined)
```

以下情况不会与参数建立关联关系
1. 有至少一个参数默认值
2. 使用了剩余参数